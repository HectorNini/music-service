# Музыкальный сервис

Веб-приложение для прослушивания и покупки музыкальных треков и плейлистов.

## Технологии

### Backend
- Java 17
- Spring Boot 3.4.2
- Spring Security
- Spring Data JPA
- PostgreSQL 15
- JWT для аутентификации

### Frontend
- React
- TypeScript
- Material-UI
- Axios

## Требования

- Docker
- Docker Compose
- Node.js 18+ (для локальной разработки frontend)
- Java 17+ (для локальной разработки backend)

## Установка и запуск

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd <repository-name>
```

2. Запустите приложение с помощью Docker Compose:
```bash
docker-compose up --build
```

Приложение будет доступно по следующим адресам:
- Frontend: http://localhost:3000
- Backend API: http://localhost:8080
- PostgreSQL: localhost:5433

## Учетные записи

В системе предустановлены следующие учетные записи:

### Администратор
- Логин: admin
- Пароль: admin
- Роль: ADMIN

### Пользователи
- Логин: user1
- Пароль: password
- Роль: USER

- Логин: user2
- Пароль: password
- Роль: USER

## Функциональность

### Для всех пользователей
- Регистрация и авторизация
- Просмотр списка треков
- Просмотр списка плейлистов
- Просмотр деталей трека/плейлиста
- Поиск по трекам и плейлистам

### Для авторизованных пользователей
- Покупка треков и плейлистов
- Просмотр истории покупок
- Управление лицензиями
- Просмотр купленных треков и плейлистов

### Для администраторов
- Управление пользователями
- Управление треками
- Управление плейлистами
- Управление ценами
- Просмотр статистики продаж
- Управление лицензиями

## Структура базы данных

### Основные таблицы
- Users - пользователи системы
- Roles - роли пользователей (ADMIN, USER)
- Tracks - музыкальные треки
- Playlists - плейлисты
- PlaylistTracks - связь между плейлистами и треками
- Pricing - цены на треки и плейлисты
- Licenses - лицензии на использование
- Payments - платежи

## API Endpoints

### Аутентификация
- POST /api/auth/login - вход в систему
- POST /api/auth/register - регистрация нового пользователя

### Треки
- GET /api/tracks - получение списка треков
- GET /api/tracks/{id} - получение информации о треке
- POST /api/tracks - создание нового трека (только для админа)
- PUT /api/tracks/{id} - обновление трека (только для админа)
- DELETE /api/tracks/{id} - удаление трека (только для админа)

### Плейлисты
- GET /api/playlists - получение списка плейлистов
- GET /api/playlists/{id} - получение информации о плейлисте
- POST /api/playlists - создание нового плейлиста (только для админа)
- PUT /api/playlists/{id} - обновление плейлиста (только для админа)
- DELETE /api/playlists/{id} - удаление плейлиста (только для админа)

### Пользователи
- GET /api/users - получение списка пользователей (только для админа)
- GET /api/users/{id} - получение информации о пользователе
- PUT /api/users/{id} - обновление информации о пользователе
- DELETE /api/users/{id} - удаление пользователя (только для админа)

### Платежи и лицензии
- GET /api/licenses - получение списка лицензий пользователя
- POST /api/licenses - покупка лицензии
- GET /api/payments - получение истории платежей
- POST /api/payments - создание нового платежа

## Разработка

### Backend
```bash
cd backend
./mvnw spring-boot:run
```

### Frontend
```bash
cd frontend
npm install
npm start
```

## Тестирование

### Backend
```bash
cd backend
./mvnw test
```

### Frontend
```bash
cd frontend
npm test
```

